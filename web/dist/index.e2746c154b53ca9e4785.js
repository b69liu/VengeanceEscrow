(self.webpackChunkserver=self.webpackChunkserver||[]).push([[826],{4677:(e,n,t)=>{"use strict";var r=t(2137),a=t(7757),s=t.n(a),c=(t(6486),t(3379)),o=t.n(c),u=t(5426);o()(u.Z,{insert:"head",singleton:!1}),u.Z.locals,t(3219);var i=t(6610),l=t(6156),p=t(387),d=t(5755);const y=JSON.parse('[{"inputs":[],"name":"buyerPay","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"confirmDeliver","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"destory","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"finishPayment","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sellerPay","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"buyer_","type":"address"},{"internalType":"address","name":"seller_","type":"address"},{"internalType":"uint256","name":"price_","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"withDrawAll","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"agent","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"buyer","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PRICE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"refundableBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"seller","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]'),g=JSON.parse('[{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"buyer","type":"address"},{"internalType":"address","name":"seller","type":"address"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"createContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"getMyEscrow","outputs":[{"internalType":"contract VengeanceEscrow","name":"","type":"address"}],"stateMutability":"view","type":"function"}]');var m,f,w=t(5108),b=t(5108),v=new function e(){var n=this;(0,i.Z)(this,e),(0,l.Z)(this,"VengeanceEscrow",null),(0,l.Z)(this,"VengeanceEscrowFactory",null),(0,l.Z)(this,"signer",null),(0,l.Z)(this,"provider",null),(0,l.Z)(this,"enableMetaMask",(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.ethereum.request({method:"eth_requestAccounts"}),n.provider=new d.Q(window.ethereum),n.signer=n.provider.getSigner(),w.log("enabled MetaMask",n.signer.address),n.setVengeanceEscrowFactory();case 5:case"end":return e.stop()}}),e)})))),(0,l.Z)(this,"setVengeanceEscrowFactory",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0x247adc5B0BDf0Ecf6Fdd2744336F9ba88b5A6632";if(n.signer){var t=new p.CH(e,g,n.provider);n.VengeanceEscrowFactory=t.connect(n.signer),w.log("Factory connected",n.signer)}else w.log("Please connect to Metamask.")})),(0,l.Z)(this,"setVengeanceEscrow",(function(e){if(n.signer){var t=new p.CH(e,y,n.provider);n.VengeanceEscrow=t.connect(n.signer),w.log(n.VengeanceEscrow)}else w.log("Please connect to Metamask.")})),(0,l.Z)(this,"createContract",function(){var e=(0,r.Z)(s().mark((function e(t,r,a,c){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.VengeanceEscrowFactory){e.next=3;break}return w.log("Please set VengeanceEscrowFactory."),e.abrupt("return");case 3:return e.next=5,n.VengeanceEscrowFactory.createContract(t,r,a,c);case 5:o=e.sent,w.log(o);case 7:case"end":return e.stop()}}),e)})));return function(n,t,r,a){return e.apply(this,arguments)}}()),(0,l.Z)(this,"getMyEscrow",function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.VengeanceEscrowFactory.getMyEscrow(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),(0,l.Z)(this,"getPrice",(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.VengeanceEscrow){e.next=3;break}return w.log("Please Link VengeanceEscrow."),e.abrupt("return");case 3:return e.next=5,n.VengeanceEscrow.PRICE();case 5:return t=e.sent,w.log(t),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))),(0,l.Z)(this,"getMyRefundableBalance",(0,r.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.VengeanceEscrow){e.next=3;break}return w.log("Please Link VengeanceEscrow."),e.abrupt("return");case 3:return e.next=5,n.signer.getAddress();case 5:return t=e.sent,e.next=8,n.VengeanceEscrow.refundableBalance(t);case 8:return r=e.sent,w.log(r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))),(0,l.Z)(this,"buyerPay",function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.VengeanceEscrow){e.next=3;break}return w.log("Please Link VengeanceEscrow."),e.abrupt("return");case 3:return e.next=5,n.VengeanceEscrow.buyerPay({value:t});case 5:r=e.sent,w.log(r);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),(0,l.Z)(this,"sellerPay",function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.VengeanceEscrow){e.next=3;break}return w.log("Please Link VengeanceEscrow."),e.abrupt("return");case 3:return e.next=5,n.VengeanceEscrow.sellerPay({value:t});case 5:r=e.sent,w.log(r);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),(0,l.Z)(this,"withdrawAll",(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.VengeanceEscrow){e.next=3;break}return w.log("Please Link VengeanceEscrow."),e.abrupt("return");case 3:return e.next=5,n.VengeanceEscrow.withDrawAll();case 5:t=e.sent,w.log(t);case 7:case"end":return e.stop()}}),e)})))),(0,l.Z)(this,"finishPayment",(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.VengeanceEscrow){e.next=3;break}return w.log("Please Link VengeanceEscrow."),e.abrupt("return");case 3:return e.next=5,n.VengeanceEscrow.finishPayment();case 5:t=e.sent,w.log(t);case 7:case"end":return e.stop()}}),e)})))),(0,l.Z)(this,"confirmDeliver",(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.VengeanceEscrow){e.next=3;break}return w.log("Please Link VengeanceEscrow."),e.abrupt("return");case 3:return e.next=5,n.VengeanceEscrow.confirmDeliver();case 5:t=e.sent,w.log(t);case 7:case"end":return e.stop()}}),e)})))),(0,l.Z)(this,"destory",(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.VengeanceEscrow){e.next=3;break}return w.log("Please Link VengeanceEscrow."),e.abrupt("return");case 3:return e.next=5,n.VengeanceEscrow.destory();case 5:t=e.sent,w.log(t);case 7:case"end":return e.stop()}}),e)}))))};function E(){document.getElementById("createEscrowContractBtn").addEventListener("click",(0,r.Z)(s().mark((function e(){var n,t,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById("newContractName").value,t=document.getElementById("newContractBuyer").value,r=document.getElementById("newContractSeller").value,a=document.getElementById("newContractPrice").value,n&&t&&r&&a){e.next=7;break}return b.log("Incompleted data."),e.abrupt("return");case 7:v.createContract(n,t,r,a);case 8:case"end":return e.stop()}}),e)}))))}document.body.prepend((m=document.createElement("div"),(f=document.createElement("button")).innerHTML="Connect MetaMask Account",f.classList.add("enableEthereumButton"),f.onclick=v.enableMetaMask,m.appendChild(f),m)),void 0!==window.ethereum&&(b.log("MetaMask is installed!"),document.getElementById("escrowContractAddressBtn").addEventListener("click",(function(){var e=document.getElementById("escrowContractAddress").value;e?v.setVengeanceEscrow(e):b.log("Escrow address is empty!")})),document.getElementById("escrowSearchNameBtn").addEventListener("click",(0,r.Z)(s().mark((function e(){var n,t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById("escrowSearchName"),t=n.value){e.next=5;break}return b.log("Escrow name is empty!"),e.abrupt("return");case 5:return e.next=7,v.getMyEscrow(t);case 7:r=e.sent,document.getElementById("escrowSearchResult").innerText=r;case 9:case"end":return e.stop()}}),e)})))),E(),E(),document.getElementById("escrowGetPriceBtn").addEventListener("click",(0,r.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getPrice();case 2:n=e.sent,document.getElementById("escrowPriceResult").innerText=n,document.getElementById("buyerNeedToPay").innerText=1.5*parseInt(n),document.getElementById("sellerNeedToPay").innerText=parseInt(n);case 6:case"end":return e.stop()}}),e)})))),document.getElementById("refundableBalanceBtn").addEventListener("click",(0,r.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getMyRefundableBalance();case 2:n=e.sent,document.getElementById("refundableBalanceResult").innerText=n;case 4:case"end":return e.stop()}}),e)})))),document.getElementById("withdrawAllBtn").addEventListener("click",(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.withdrawAll();case 2:case"end":return e.stop()}}),e)})))),document.getElementById("buyerPayBtn").addEventListener("click",(0,r.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById("buyerPay").value){e.next=4;break}return b.log("Please enter amount to pay."),e.abrupt("return");case 4:return e.next=6,v.buyerPay(n);case 6:t=e.sent,b.log(t);case 8:case"end":return e.stop()}}),e)})))),document.getElementById("sellerPayBtn").addEventListener("click",(0,r.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById("sellerPay").value){e.next=4;break}return b.log("Please enter amount to pay."),e.abrupt("return");case 4:return e.next=6,v.sellerPay(n);case 6:t=e.sent,b.log(t);case 8:case"end":return e.stop()}}),e)})))),document.getElementById("finishPayment").addEventListener("click",(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.finishPayment();case 1:case"end":return e.stop()}}),e)})))),document.getElementById("confirmDelivery").addEventListener("click",(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.confirmDeliver();case 1:case"end":return e.stop()}}),e)})))),document.getElementById("destoryContract").addEventListener("click",(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.destory();case 1:case"end":return e.stop()}}),e)})))))},5426:(e,n,t)=>{"use strict";t.d(n,{Z:()=>s});var r=t(3645),a=t.n(r)()((function(e){return e[1]}));a.push([e.id,"\r\n.enableEthereumButton{\r\n    background: rgb(10, 211, 10);\r\n    border: none;\r\n    color: white;\r\n    text-align: center;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    height: 40px;\r\n    border-radius: 5px;\r\n    padding: auto;\r\n}\r\n\r\n#finishPayment, #confirmDelivery{\r\n    background: rgb(15, 30, 165);\r\n    border: none;\r\n    color: white;\r\n    text-align: center;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    height: 30px;\r\n    border-radius: 5px;\r\n    padding: auto;\r\n}\r\n\r\n#destoryContract{\r\n    background: rgb(199, 18, 18);\r\n    border: none;\r\n    color: white;\r\n    text-align: center;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    height: 30px;\r\n    border-radius: 5px;\r\n    padding: auto;\r\n}",""]);const s=a},3219:(e,n,t)=>{"use strict";e.exports=t.p+"ab2d34a1a16ffabb1040.png"},6601:()=>{}},e=>{"use strict";e.O(0,[216],(()=>(4677,e(e.s=4677)))),e.O()}]);